(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[94],{1830:function(e,n,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/debug",function(){return s(3211)}])},3211:function(e,n,s){"use strict";s.r(n),s.d(n,{__toc:function(){return t},default:function(){return o}});var i=s(2676),r=s(5383),d=s(1993),c={src:"/_next/static/media/network.621848a7.png",height:84,width:675,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAABCAIAAABsYngUAAAAIUlEQVR42mOIjIzU0tK2s7MPCQlx9QkJDAqOjY21trYGAFR+BuXpLWXnAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:1},l={src:"/_next/static/media/sw.3375b420.png",height:602,width:884,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAIAAAD38zoCAAAAd0lEQVR42h3MDQ6CIBgAUK7SFlZI36DSYmMqyE/ABluG3f8mOd8BHiqlaKWuADnnWeuu68+X9nZ/oODdOwRKaYjRzEYIyfuJAkcpplrrYWe9W5aPHEbCBLLWbRsAcM7VrmVP9jJISrn+VkIIxngYp5z81zen5vgH/NMcKYPosVkAAAAASUVORK5CYII=",blurWidth:8,blurHeight:5},h={src:"/_next/static/media/cache.2ef41bbf.png",height:845,width:884,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAAo0lEQVR42h2O3Q6CMAyFtzICYyaEC+7UZ+LJ1bdgJhJko8sy9mPlXDRtc3q+8mmatNaMMaXUvtt1/XLOqQdEbJqm73spZU6ZtlVVOedEe8pa673/LAsAhBCoCg5wUV06NY4jXdR1nXMWDjHFSBZKE0K0UqquK6VAynkYBrLT8Hi+CokxY4wADscRYmJEvd+uBCPTH0OPzvNMuVq/iR9jNNuGiD+G9mKe5AlyHwAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:8};let t=[{depth:2,value:"开发者工具",id:"开发者工具"},{depth:2,value:"网络观察",id:"网络观察"},{depth:2,value:"观察 SW",id:"观察-sw"},{depth:2,value:"观察缓存",id:"观察缓存"},{depth:2,value:"调试代码",id:"调试代码"}];function A(e){let n=Object.assign({h1:"h1",p:"p",h2:"h2",code:"code",img:"img",ul:"ul",li:"li",a:"a"},(0,d.a)(),e.components);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{children:"本地及线上调试方法"}),"\n",(0,i.jsx)(n.p,{children:"  本篇将介绍如何在浏览器中观察和调试 SW 的功能。"}),"\n",(0,i.jsx)(n.h2,{id:"开发者工具",children:"开发者工具"}),"\n",(0,i.jsxs)(n.p,{children:["  在大部分浏览器中，均可使用 ",(0,i.jsx)(n.code,{children:"F12"})," 打开开发者工具（edge 可使用 ",(0,i.jsx)(n.code,{children:"ctrl"})," + ",(0,i.jsx)(n.code,{children:"shift"})," + ",(0,i.jsx)(n.code,{children:"I"}),"），我们在浏览器中的调试也全部在这个开发者工具中进行。"]}),"\n",(0,i.jsx)(n.h2,{id:"网络观察",children:"网络观察"}),"\n",(0,i.jsxs)(n.p,{children:["  在 ",(0,i.jsx)(n.code,{children:"网络"})," 一栏中，我们可以监视当前网页的所有网络活动，也可以限制当前页的网络速度，具体的功能您可以自行探索。"]}),"\n",(0,i.jsx)(n.p,{children:"  如果您启用了 swpp 中与网络请求相关的功能（如本地缓存、备用 URL等），那么在网络信息中，就能发现部分请求出现了两次："}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"网络信息示例",placeholder:"blur",src:c})}),"\n",(0,i.jsxs)(n.p,{children:["  仔细观察就会发现这两个请求并不完全相同，主要区别在于一个是 ",(0,i.jsx)(n.code,{children:"kms.js"})," 发起的，另一个是 ",(0,i.jsx)(n.code,{children:"sw.js"})," 发起的，同时可以发现其中一个请求的“履行者”一栏写的是“ServiceWorker”。"]}),"\n",(0,i.jsx)(n.p,{children:"  当“履行者”一栏值为“ServiceWorker”时，表明该请求被 SW 拦截并代理，具体的操作由 SW 完成；当文件名左侧出现一个齿轮图标（或“发起者”是 SW 的 js 文件）时，表明该请求由 SW 发起。"}),"\n",(0,i.jsx)(n.p,{children:"  如果一个请求被 SW 代理，但在网络请求中却找不到 SW 发起的请求，那么表明该请求走了本地缓存，直接从本地中读取了值。"}),"\n",(0,i.jsx)(n.h2,{id:"观察-sw",children:"观察 SW"}),"\n",(0,i.jsxs)(n.p,{children:["  在 ",(0,i.jsx)(n.code,{children:"应用程序 > Service workers"})," 一栏中，就可以观察到 SW 的注册情况："]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"观察 SW 注册情况",placeholder:"blur",src:l})}),"\n",(0,i.jsx)(n.p,{children:"  这里主要列出了 SW 当前的状态，“来源”后如果出现红色叉号，表明 SW 文件当前或历史运行过程中出现过报错（网络报错也会计算在内）。"}),"\n",(0,i.jsx)(n.p,{children:"  同时顶部还有三个选项可以使用，这三个选项的功能如下（这三个功能仅调试时使用）："}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"脱机"}),"：禁止当前网页使用互联网（相当于把这个网页的网断了）"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"重新加载时更新"}),"：刷新网页时更新 SW（不勾选的时候 SW 的更新可能会有延迟）"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"网络旁路"}),"：禁止 SW 代理网络请求（打开后所有请求都会绕过 SW）"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["  该页面中更具体的介绍可以参考：",(0,i.jsx)(n.a,{href:"https://developer.chrome.com/docs/devtools/progressive-web-apps?hl=zh-cn#service-workers",children:"Chrome 文档"}),"。"]}),"\n",(0,i.jsx)(n.h2,{id:"观察缓存",children:"观察缓存"}),"\n",(0,i.jsxs)(n.p,{children:["  在 ",(0,i.jsx)(n.code,{children:"应用程序 > 缓存存储 > 您设置的缓存名称"})," 一栏中，您可以查看 SW 创建的所有缓存信息："]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"观察缓存",placeholder:"blur",src:h})}),"\n",(0,i.jsx)(n.p,{children:"  在这个页面，您还可以手动删除某一个或全部缓存。"}),"\n",(0,i.jsx)(n.h2,{id:"调试代码",children:"调试代码"}),"\n",(0,i.jsxs)(n.p,{children:["  在 ",(0,i.jsx)(n.code,{children:"源代码 > sw.js > 您的域名 > 您设置的 sw 名称"})," 一栏中，您可以查看当前 sw 的代码，并可以进行断点调试。"]}),"\n",(0,i.jsxs)(n.p,{children:["  具体使用方法参考：",(0,i.jsx)(n.a,{href:"https://developer.chrome.com/docs/devtools/sources?hl=zh-cn",children:"Chrome 文档"}),"，这里不再赘述。"]})]})}var o=(0,r.j)({MDXContent:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,d.a)(),e.components);return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(A,{...e})}):A(e)},pageOpts:{filePath:"pages/debug.mdx",route:"/debug",timestamp:1728822116e3,title:"本地及线上调试方法",headings:t},pageNextRoute:"/debug"})}},function(e){e.O(0,[383,888,774,179],function(){return e(e.s=1830)}),_N_E=e.O()}]);